import { useState } from 'react';
import { Meta, Story, Props } from '@storybook/addon-docs';
import { ComponentHeader, CssVars, TabContainer } from 'storybook/blocks';

import Description from './Description.mdx';
import Changelog from '../../CHANGELOG.md';
import SliderWithHistogram from '../SliderWithHistogram';
import { version } from '../../package.json';
import styles from '!!raw-loader!../styles/default.module.css';

<!-- Meta -->

<Meta
  title="Components/Molecules/SliderWithHistogram"
  component={SliderWithHistogram}
/>

export const SliderTemplate = args => {
  const [selected, setSelected] = useState(args.selectedRangeIndexes);
  const onChange = (values, index) => {
    console.log('onClick', values, index);
    setSelected(values);
  };
  return (
    <div style={{ maxWidth: '500px' }}>
      <SliderWithHistogram
        {...args}
        onChange={onChange}
        onAfterChange={onChange}
        selectedRangeIndexes={selected}
      />
    </div>
  );
};

<!-- Canvas -->

<Story
  args={{
    data: [0, 2, 0, 4, 6, 8, 4, 7, 6, 0],
    selectedRangeIndexes: [0, 9],
    ariaValueText: 'the label â‚¬',
  }}
  name="SliderWithHistogram"
>
  {SliderTemplate.bind({})}
</Story>

<!-- Docs -->

<ComponentHeader
  name="SliderWithHistogram"
  version={version}
  stage={1}
  design="https://www.figma.com/file/rrvkvQEoVTOHa7MzyKSaoz/Design-system?type=design&node-id=16183-216308&t=7R05xcivHCpVcg0r-0"
/>

SliderWithHistogram provides users with a way to interactively adjust a value or range within a specific range or set of options.

```tsx
// TSX/JSX file
// Core import is recomended
import SliderWithHistogram from '@heycar-uikit/core/slider-with-histogram';

// or
import SliderWithHistogram from '@heycar-uikit/slider-with-histogram';

function App() {
  return <SliderWithHistogram />;
}
```

```css
// CSS file
// Core import is recomended
@import '@heycar-uikit/core/slider/esm/SliderWithHistogram.constants.css';

// or
@import '@heycar-uikit/slider/dist/esm/SliderWithHistogram.constants.css';
```

<!-- Description -->

<TabContainer
  tabs={[
    { label: 'Description', component: <Description /> },
    { label: 'Props', component: <Props of={SliderWithHistogram} /> },
    {
      label: 'CSS tokens',
      component: (
        <CssVars
          css={`
            ${styles}
          `}
        />
      ),
    },
    { label: 'Changelog', component: <Changelog /> },
  ]}
/>
